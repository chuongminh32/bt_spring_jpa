<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin}">

<head>
    <title>Danh s√°ch S√°ch</title>
</head>
<body>
<div layout:fragment="content" class="container mt-4">

    <h2 class="mb-3">Danh s√°ch S√°ch</h2>

    <div class="d-flex justify-content-between mb-3">
        <a th:href="@{/admin/books/create}" class="btn btn-primary">+ Th√™m S√°ch</a>
        <input type="text" id="customSearch" class="form-control w-25"
               placeholder="üîç Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m...">
    </div>

    <table id="bookTable" class="table table-bordered table-striped align-middle">
        <thead class="table-dark text-center">
        <tr>
            <th>ID</th>
            <th>·∫¢nh b√¨a</th>
            <th>Ti√™u ƒë·ªÅ</th>
            <th>ISBN</th>
            <th>Publisher</th>
            <th>Ng√†y xu·∫•t b·∫£n</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>Thao t√°c</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="b : ${books}">
            <td class="text-center" th:text="${b.bookId}"></td>
            <td class="text-center">
                <img th:src="@{${b.coverImage}}" alt="cover"
                     class="img-thumbnail"
                     style="width: 60px; height: 80px; object-fit: cover;"/>
            </td>
            <!-- Ti√™u ƒë·ªÅ c√≥ link t·ªõi trang chi ti·∫øt -->
            <td>
                <a th:href="@{/admin/books/detail/{id}(id=${b.bookId})}" 
                   th:text="${b.title}"></a>
            </td>
            <td th:text="${b.isbn}"></td>
            <td th:text="${b.publisher}"></td>
            <td th:text="${b.publishDate != null ? #temporals.format(b.publishDate, 'dd/MM/yyyy') : ''}"></td>
            <td class="text-center" th:text="${b.quantity}"></td>
            <td class="text-center">
                <!-- N√∫t Chi ti·∫øt -->
                <a th:href="@{/admin/books/detail/{id}(id=${b.bookId})}"
                   class="btn btn-sm btn-info">Chi ti·∫øt</a>

                <!-- N√∫t S·ª≠a -->
                <a th:href="@{/admin/books/edit/{id}(id=${b.bookId})}"
                   class="btn btn-sm btn-warning">S·ª≠a</a>

                <!-- N√∫t X√≥a (x√°c nh·∫≠n tr∆∞·ªõc khi x√≥a) -->
                <a th:href="@{/admin/books/delete/{id}(id=${b.bookId})}"
                   class="btn btn-sm btn-danger"
                   onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s√°ch n√†y kh√¥ng?')">X√≥a</a>
            </td>
        </tr>
        </tbody>
    </table>

    <!-- Ph√¢n trang -->
    <nav>
        <ul class="pagination">
            <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages-1)}"
                th:classappend="${i == currentPage} ? 'active'">
                <a class="page-link" th:href="@{/admin/books(page=${i})}" th:text="${i+1}"></a>
            </li>
        </ul>
    </nav>

</div>
</body>
</html>
