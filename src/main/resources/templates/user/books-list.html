<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/user}">
<head>
<title>Danh sÃ¡ch SÃ¡ch</title>
</head>
<body>
	<div layout:fragment="content" class="container mt-4">

		<h2 class="mb-3">ğŸ“š Danh sÃ¡ch SÃ¡ch</h2>

		<!-- NÃºt thÃªm Book + Thanh tÃ¬m kiáº¿m -->
		<div class="d-flex justify-content-between mb-3">
			<a th:href="@{/admin/book/add}" class="btn btn-primary">+ ThÃªm
				SÃ¡ch</a> <input type="text" id="customSearch" class="form-control w-25"
				placeholder="ğŸ” Nháº­p tá»« khÃ³a Ä‘á»ƒ tÃ¬m...">
		</div>

		<!-- Báº£ng Books -->
		<table id="bookTable"
			class="table table-bordered table-striped align-middle">
			<thead class="table-dark text-center">
				<tr>
					<th>ID</th>
					<th>ISBN</th>
					<th>TiÃªu Ä‘á»</th>
					<th>NXB</th>
					<th>GiÃ¡</th>
					<th>Sá»‘ lÆ°á»£ng</th>
					<th>BÃ¬a</th>
					<th>Thao tÃ¡c</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="b : ${listBook}">
					<td th:text="${b.bookId}"></td>
					<td th:text="${b.isbn}"></td>
					<td th:text="${b.title}"></td>
					<td th:text="${b.publisher}"></td>
					<td th:text="${b.price}"></td>
					<td th:text="${#dates.format(b.publishDate, 'dd/MM/yyyy')}"></td>
					<td th:text="${b.quantity}"></td>
					<td><img th:src="@{/uploads/{img}(img=${b.coverImage})}"
						alt="cover" width="60" height="80" /></td>
				</tr>

			</tbody>
		</table>

	</div>

	<!-- Script DataTables -->
	<script th:inline="javascript">
    $(document).ready(function () {
        let table = $('#bookTable').DataTable({
            pageLength: 5,
            lengthChange: false,
            searching: true,
            info: false,
            pagingType: "simple",
            dom: 't<"d-flex justify-content-center mt-3"p>',
            language: {
                paginate: {
                    previous: "Â« TrÆ°á»›c",
                    next: "Sau Â»"
                },
                zeroRecords: "KhÃ´ng cÃ³ dá»¯ liá»‡u"
            }
        });

        // ğŸ” TÃ¬m kiáº¿m thá»§ cÃ´ng
        $('#customSearch').on('keyup', function () {
            table.search(this.value).draw();
        });

        // ğŸ¨ Style pagination Ä‘áº¹p
        function stylePagination() {
            $('.dataTables_paginate a')
                .addClass('btn btn-dark mx-2')
                .css({
                    'color': '#fff',
                    'text-decoration': 'none'
                });

            $('.dataTables_paginate .disabled a')
                .removeClass('btn-dark')
                .addClass('btn btn-secondary disabled')
                .css('color', '#fff');
        }

        stylePagination();
        table.on('draw', function () {
            stylePagination();
        });
    });
</script>
</body>
</html>
